<!DOCTYPE html>
<html>
<head>
    <title>Family Tree Test</title>
</head>
<body>
    <h1>Family Tree Test Page</h1>
    <div id="test-results"></div>
    
    <script>
        const results = document.getElementById('test-results');
        
        // Test 1: Check if D3 loads
        function testD3() {
            return new Promise((resolve) => {
                const script = document.createElement('script');
                script.src = 'https://d3js.org/d3.v7.min.js';
                script.onload = () => {
                    if (typeof d3 !== 'undefined') {
                        resolve('✅ D3.js loaded successfully (version: ' + d3.version + ')');
                    } else {
                        resolve('❌ D3.js script loaded but d3 object not found');
                    }
                };
                script.onerror = () => {
                    resolve('❌ Failed to load D3.js from CDN');
                };
                document.head.appendChild(script);
            });
        }
        
        // Test 2: Check if JSON file exists
        async function testJSON() {
            try {
                const response = await fetch('family1.json');
                if (response.ok) {
                    const data = await response.json();
                    return `✅ family1.json loaded successfully (${data.people.length} people, ${data.relationships.length} relationships)`;
                } else {
                    return `❌ family1.json returned status ${response.status}`;
                }
            } catch (error) {
                return `❌ Error loading family1.json: ${error.message}`;
            }
        }
        
        // Run tests
        async function runTests() {
            results.innerHTML = '<p>Running tests...</p>';
            
            const d3Result = await testD3();
            results.innerHTML += '<p>' + d3Result + '</p>';
            
            const jsonResult = await testJSON();
            results.innerHTML += '<p>' + jsonResult + '</p>';
            
            results.innerHTML += '<p><strong>If both tests pass, the main page should work. Check the console for any errors.</strong></p>';
        }
        
        runTests();
    </script>
</body>
</html>

